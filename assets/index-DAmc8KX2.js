import{c as pe,r as n,m as T,b as f,e as Ue,o as We,f as Ke,j as e,g as Ge,i as B,k as Z,h as q,l as Ye,n as Ze,M as u,P as fe,F as R,x as G,V as ce,y as he,T as E,w as xe,v as qe,N as Je,B as ue}from"./index-CfX38i0E.js";import{u as Qe,C as Xe,c as eo,T as oo}from"./ThreadPreview-BQwILsf3.js";import{S as ve}from"./Spinner-B5-Pg5YH.js";import{C as M,a as ge,b as J}from"./chunk-YQO7BFFX-Bu66JaRZ.js";import{S as Q}from"./chunk-7254PCTD-Dpa5zOsZ.js";import{S as ro}from"./chunk-BL2ZZSHG-B7ncdinR.js";import{D as Y}from"./chunk-W7WUSNWJ-RwjSrdRn.js";import{f as to}from"./useProtectedSubmission--UnRbhvM.js";import{S as no,a as k}from"./StackData-CIQiaai1.js";import{N as so}from"./NewBoardBtn-BsQnfUXR.js";import{N as ao}from"./DeletedLabel-Jd_gx_v8.js";import{u as io,a as lo,c as co,b as uo,d as mo,e as U}from"./index-D5CZ-aoS.js";import{u as po}from"./index-DIVj8hE7.js";import{l as fo}from"./index-DLVTVQVU.js";import{u as ho}from"./chunk-7JBTTEVG-DxtWywDM.js";import{L as xo}from"./chunk-K7XRJ7NL-o9yVDeel.js";import"./index-BOgs50uT.js";import"./chunk-7YYN6TNS-CskFNnm6.js";import"./useSubmitHandlers-Cwbi2rXh.js";import"./chunk-RAWN7VJ3-DVbMMFoJ.js";import"./chunk-4FCEGNGT-B-jdCA2V.js";import"./chunk-OFOVX77R-zSbCe2qK.js";import"./chunk-RKXMPHPI-BX2ZiOEW.js";import"./FormModal-C1R4AyCJ.js";import"./helperText-BjkVZXYi.js";import"./index.esm-7bvCp7Uk.js";import"./useMaxLength-BeQ-kzod.js";import"./useBoardsList-odeYd0r0.js";import"./index-CAYa1ODE.js";var[vo,D]=pe({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[go,X]=pe({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `});function ye(o){const r=n.Children.only(o.children),{getTriggerProps:a}=D();return n.cloneElement(r,a(r.props,r.ref))}ye.displayName="PopoverTrigger";var w={click:"click",hover:"hover"};function yo(o={}){const{closeOnBlur:r=!0,closeOnEsc:a=!0,initialFocusRef:s,id:l,returnFocusOnClose:i=!0,autoFocus:C=!0,arrowSize:v,arrowShadowColor:y,trigger:m=w.click,openDelay:j=200,closeDelay:P=200,isLazy:H,lazyBehavior:ke="unmount",computePositionOnMount:Be,...Re}=o,{isOpen:d,onClose:h,onOpen:z,onToggle:ee}=io(o),L=n.useRef(null),_=n.useRef(null),b=n.useRef(null),S=n.useRef(!1),oe=n.useRef(!1);d&&(oe.current=!0);const[re,De]=n.useState(!1),[te,_e]=n.useState(!1),Ae=n.useId(),Ie=l??Ae,[ne,A,I,N]=["popover-trigger","popover-content","popover-header","popover-body"].map(t=>`${t}-${Ie}`),{referenceRef:O,getArrowProps:Ne,getPopperProps:se,getArrowInnerProps:Oe,forceUpdate:Fe}=lo({...Re,enabled:d||!!Be}),ae=co({isOpen:d,ref:b});po({enabled:d,ref:_}),uo(b,{focusRef:_,visible:d,shouldFocus:i&&m===w.click}),mo(b,{focusRef:s,visible:d,shouldFocus:C&&m===w.click});const ie=fo({wasSelected:oe.current,enabled:H,mode:ke,isSelected:ae.present}),Ee=n.useCallback((t={},p=null)=>{const c={...t,style:{...t.style,transformOrigin:U.transformOrigin.varRef,[U.arrowSize.var]:v?`${v}px`:void 0,[U.arrowShadowColor.var]:y},ref:T(b,p),children:ie?t.children:null,id:A,tabIndex:-1,role:"dialog",onKeyDown:f(t.onKeyDown,x=>{a&&x.key==="Escape"&&h()}),onBlur:f(t.onBlur,x=>{const F=de(x),$=W(b.current,F),$e=W(_.current,F);d&&r&&(!$&&!$e)&&h()}),"aria-labelledby":re?I:void 0,"aria-describedby":te?N:void 0};return m===w.hover&&(c.role="tooltip",c.onMouseEnter=f(t.onMouseEnter,()=>{S.current=!0}),c.onMouseLeave=f(t.onMouseLeave,x=>{x.nativeEvent.relatedTarget!==null&&(S.current=!1,setTimeout(()=>h(),P))})),c},[ie,A,re,I,te,N,m,a,h,d,r,P,y,v]),Me=n.useCallback((t={},p=null)=>se({...t,style:{visibility:d?"visible":"hidden",...t.style}},p),[d,se]),He=n.useCallback((t,p=null)=>({...t,ref:T(p,L,O)}),[L,O]),g=n.useRef(),V=n.useRef(),le=n.useCallback(t=>{L.current==null&&O(t)},[O]),ze=n.useCallback((t={},p=null)=>{const c={...t,ref:T(_,p,le),id:ne,"aria-haspopup":"dialog","aria-expanded":d,"aria-controls":A};return m===w.click&&(c.onClick=f(t.onClick,ee)),m===w.hover&&(c.onFocus=f(t.onFocus,()=>{g.current===void 0&&z()}),c.onBlur=f(t.onBlur,x=>{const F=de(x),$=!W(b.current,F);d&&r&&$&&h()}),c.onKeyDown=f(t.onKeyDown,x=>{x.key==="Escape"&&h()}),c.onMouseEnter=f(t.onMouseEnter,()=>{S.current=!0,g.current=window.setTimeout(()=>z(),j)}),c.onMouseLeave=f(t.onMouseLeave,()=>{S.current=!1,g.current&&(clearTimeout(g.current),g.current=void 0),V.current=window.setTimeout(()=>{S.current===!1&&h()},P)})),c},[ne,d,A,m,le,ee,z,r,h,j,P]);n.useEffect(()=>()=>{g.current&&clearTimeout(g.current),V.current&&clearTimeout(V.current)},[]);const Le=n.useCallback((t={},p=null)=>({...t,id:I,ref:T(p,c=>{De(!!c)})}),[I]),Ve=n.useCallback((t={},p=null)=>({...t,id:N,ref:T(p,c=>{_e(!!c)})}),[N]);return{forceUpdate:Fe,isOpen:d,onAnimationComplete:ae.onComplete,onClose:h,getAnchorProps:He,getArrowProps:Ne,getArrowInnerProps:Oe,getPopoverPositionerProps:Me,getPopoverProps:Ee,getTriggerProps:ze,getHeaderProps:Le,getBodyProps:Ve}}function W(o,r){return o===r||(o==null?void 0:o.contains(r))}function de(o){var r;const a=o.currentTarget.ownerDocument.activeElement;return(r=o.relatedTarget)!=null?r:a}function je(o){const r=Ue("Popover",o),{children:a,...s}=We(o),l=Ke(),i=yo({...s,direction:l.direction});return e.jsx(vo,{value:i,children:e.jsx(go,{value:r,children:Ge(a,{isOpen:i.isOpen,onClose:i.onClose,forceUpdate:i.forceUpdate})})})}je.displayName="Popover";var K=(o,r)=>r?`${o}.${r}, ${r}`:void 0;function Pe(o){var r;const{bg:a,bgColor:s,backgroundColor:l,shadow:i,boxShadow:C,shadowColor:v}=o,{getArrowProps:y,getArrowInnerProps:m}=D(),j=X(),P=(r=a??s)!=null?r:l,H=i??C;return e.jsx(B.div,{...y(),className:"chakra-popover__arrow-positioner",children:e.jsx(B.div,{className:Z("chakra-popover__arrow",o.className),...m(o),__css:{"--popper-arrow-shadow-color":K("colors",v),"--popper-arrow-bg":K("colors",P),"--popper-arrow-shadow":K("shadows",H),...j.arrow}})})}Pe.displayName="PopoverArrow";var be=q(function(r,a){const{getBodyProps:s}=D(),l=X();return e.jsx(B.div,{...s(r,a),className:Z("chakra-popover__body",r.className),__css:l.body})});be.displayName="PopoverBody";function jo(o){if(o)return{enter:{...o.enter,visibility:"visible"},exit:{...o.exit,transitionEnd:{visibility:"hidden"}}}}var Po={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},bo=B(Ye.section),we=q(function(r,a){const{variants:s=Po,...l}=r,{isOpen:i}=D();return e.jsx(bo,{ref:a,variants:jo(s),initial:!1,animate:i?"enter":"exit",...l})});we.displayName="PopoverTransition";var Ce=q(function(r,a){const{rootProps:s,motionProps:l,...i}=r,{getPopoverProps:C,getPopoverPositionerProps:v,onAnimationComplete:y}=D(),m=X(),j={position:"relative",display:"flex",flexDirection:"column",...m.content};return e.jsx(B.div,{...v(s),__css:m.popper,className:"chakra-popover__popper",children:e.jsx(we,{...l,...C(i,a),onAnimationComplete:Ze(y,i.onAnimationComplete),className:Z("chakra-popover__content",r.className),__css:j})})});Ce.displayName="PopoverContent";function wo(){return{_id:`thread-${u.string.uuid()}`,title:u.lorem.sentence(),body:Math.random()<.5?u.lorem.paragraphs({min:1,max:5},`

`):null,createdAt:u.date.recent({days:30}),replies:Array.from({length:u.number.int({min:0,max:10})},()=>u.string.uuid()),author:{_id:`user-${u.string.uuid()}`,username:u.internet.userName(),deleted:!1},board:{_id:u.string.uuid(),name:u.word.noun(),deleted:Math.random()<.1},deleted:!1}}const Co={threads:Array.from({length:u.number.int({min:0,max:50})},()=>wo())},Se=n.createContext();function So({children:o}){return e.jsx(fe,{endpoint:"/api/threads",Context:Se,mockData:Co,children:o})}function To(){return n.useContext(Se)}function ko(){const{data:o,isLoading:r}=To(),{compactView:a}=Qe();return e.jsx(M,{variant:{base:"unstyled",md:"outline"},flex:1,size:"sm",as:"section","aria-label":"Recent Threads",children:r?e.jsx(ve,{p:4}):e.jsxs(Q,{in:!!o,children:[e.jsx(ge,{children:e.jsxs(R,{alignItems:"center",gap:2,children:[e.jsx(G,{size:"md",children:"Recent Threads"}),e.jsx(ro,{}),e.jsx(Xe,{})]})}),e.jsx(Y,{my:{base:4,md:0}}),e.jsx(J,{children:o.threads.length===0?e.jsxs(ce,{gap:0,textAlign:"center",children:[e.jsx(he,{src:eo,width:250,height:250}),e.jsx(G,{size:"md",children:"Nothing to show"}),e.jsx(E,{mt:1,children:"Boardly currently has no threads, be the first to create one!"})]}):e.jsx(ce,{gap:a?2:3,as:"ul",listStyleType:"none",children:o.threads.sort((s,l)=>new Date(l.createdAt).valueOf()-new Date(s.createdAt).valueOf()).map(s=>e.jsx(oo,{thread:s,authorLabel:!0,isInProfile:!0},s._id))})})]})})}const Bo={site:{userCount:u.number.int({min:30,max:50}),threadCount:u.number.int({min:30,max:50}),replyCount:u.number.int({min:30,max:50}),boardCount:u.number.int({min:30,max:50}),createdAt:u.date.recent()}},Te=n.createContext();function Ro({children:o}){return e.jsx(fe,{endpoint:"/api/info",Context:Te,mockData:Bo,children:o})}function Do(){return n.useContext(Te)}function me({variant:o="xl"}){const{data:r,isLoading:a}=Do(),s={xl:{display:{base:"none",xl:"flex"},position:"sticky",h:{md:"calc(100vh - 88px)"},w:{md:64,lg:80},minW:{md:64,lg:80},top:"72px",variant:"outline"},base:{display:{base:"flex",xl:"none"},position:"static",variant:"outline",h:"fit",w:"full"}};return e.jsx(M,{size:"sm",overflowY:"auto",...s[o],as:"section","aria-label":"Site Info",children:a?e.jsx(ve,{}):e.jsxs(Q,{in:!!r,offsetY:10,children:[e.jsx(ge,{children:e.jsx(xe,{children:e.jsx(qe,{})})}),e.jsx(Y,{}),e.jsxs(J,{children:[e.jsxs(R,{gap:2,justifyContent:"center",children:[e.jsx(ao,{}),e.jsx(so,{})]}),e.jsx(Y,{my:3}),e.jsxs(Je,{divider:e.jsx(no,{}),children:[e.jsx(k,{name:"Boards",value:r.site.boardCount}),e.jsx(k,{name:"Users",value:r.site.userCount}),e.jsx(k,{name:"Threads",value:r.site.threadCount}),e.jsx(k,{name:"Replies",value:r.site.replyCount}),e.jsx(k,{name:"Created On",value:to("2024-10-04T15:22:42.861Z")})]})]})]})})}const _o="/assets/welcome-8SPA5yw3.svg";function Ao(){const{isOpen:o,onOpen:r,onClose:a}=ho(),s="15px";function l(){if(!o){r();try{navigator.clipboard.writeText("dev.nicoll.douglas@gmail.com")}catch(i){console.log(i)}}}return n.useEffect(()=>{if(!o)return;const i=setTimeout(a,2e3);return()=>clearTimeout(i)},[o]),e.jsx(je,{isOpen:o,closeOnBlur:!0,children:e.jsx(M,{size:"sm",variant:"outline",as:"section","aria-labelledby":"welcome-heading",children:e.jsx(J,{children:e.jsx(Q,{in:!0,offsetY:10,transition:{enter:{delay:.05}},children:e.jsxs(xe,{children:[e.jsxs(R,{gap:4,alignItems:"center",minW:"fit-content",flexDir:{base:"column",lg:"row"},children:[e.jsx(he,{height:275,width:275,src:_o,alt:"Welcome"}),e.jsxs(R,{flexDir:"column",children:[e.jsx(G,{mb:1,id:"welcome-heading",children:"Welcome to Boardly!"}),e.jsx(E,{mb:2,fontSize:s,children:"Boardly is a demo messaging board where you can post threads to various different boards, reply to users, customise your profile and more. This is a non-production environment so try it out!"}),e.jsxs(E,{fontSize:s,mb:2,lineHeight:.9,children:["Check out my"," ",e.jsx(ue,{fontSize:s,as:xo,variant:"link",target:"_blank",href:"https://github.com/nicoll-douglas",children:"GitHub"})," ","for more cool projects or shoot me an email at"," ",e.jsx(ye,{children:e.jsx(ue,{fontSize:s,variant:"link",onClick:l,children:"me@nicolldouglas.dev"})}),"."]}),e.jsx(E,{fontSize:s,children:"- Nicoll"})]})]}),e.jsxs(Ce,{maxW:"fit-content",children:[e.jsx(Pe,{}),e.jsx(be,{children:"Copied to clipboard!"})]})]})})})})})}function cr(){return e.jsx(So,{children:e.jsxs(Ro,{children:[e.jsxs(R,{flexDir:"column",gap:4,flex:1,as:M,variant:"unstyled",children:[e.jsx(Ao,{}),e.jsx(me,{variant:"base"}),e.jsx(ko,{})]}),e.jsx(me,{variant:"xl"})]})})}export{cr as default};
