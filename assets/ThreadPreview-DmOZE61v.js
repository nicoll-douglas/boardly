import{r as y,ac as b,j as e,R as g,O as k,Q as v,B as h,U as w,F as p,X as B,h as D,b as S,T as M}from"./index-4ulQWezs.js";import{G as z,M as $}from"./index-CWsiLGWi.js";import{D as m,C as u,T as j,t as L}from"./DeletedLabel-DRCkYGds.js";import{n as O}from"./Spinner-ZnyjS838.js";import{D as E}from"./chunk-7YYN6TNS-q5mX75mi.js";import{u as F,L as A,a as H}from"./useProtectedSubmission-ByvYB6ll.js";import{u as V}from"./useSubmitHandlers-DjEugLkN.js";import{u as I}from"./chunk-7JBTTEVG-bqMuTkud.js";import{A as Q,a as G,M as q,H as R}from"./chunk-RAWN7VJ3-XVnb-wSQ.js";import{M as K,c as W,d as U}from"./chunk-4FCEGNGT-BmvcryFd.js";import{M as J}from"./chunk-OFOVX77R-CxszOX9N.js";import{C as N,a as P,b as X}from"./chunk-YQO7BFFX-Do2ymHFM.js";import{C as f}from"./chunk-RKXMPHPI-DFxT7yJX.js";import{D as Y}from"./chunk-W7WUSNWJ-BBRS0i-z.js";function C(){return y.useContext(b)}function Z(s){return z({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"21",y1:"10",x2:"3",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"21",y1:"18",x2:"3",y2:"18"},child:[]}]})(s)}function pe(){const{compactView:s,setCompactView:n}=C();return e.jsx(g,{variant:"ghost",size:"sm",icon:s?e.jsx($,{size:20}):e.jsx(Z,{size:20}),onClick:()=>n(r=>!r),"aria-label":"Toggle compact view","aria-pressed":s})}async function _(s){return fetch(`https://lorem-backend-6ggh.onrender.com/api/threads/${s}`,{method:"DELETE",credentials:"include"})}function ee({threadId:s,boardName:n}){const r=k(),d=y.useRef(),c=v(),{isOpen:i,onOpen:o,onClose:t}=I(),a=F(()=>{r.invalidateQueries({queryKey:["GET /api/me/threads"]}),r.invalidateQueries({queryKey:["GET /api/me/replies"]}),r.invalidateQueries({queryKey:[`GET /api/boards/${n}`]}),t(),c({status:"success",title:"Successfully deleted thread"})}),l=V(async()=>_(s),a);return e.jsxs(e.Fragment,{children:[e.jsx(g,{icon:e.jsx(E,{}),colorScheme:"red",variant:"ghost",size:"xs",onClick:o,zIndex:80,"aria-label":"Delete thread"}),e.jsxs(Q,{isOpen:i,onClose:t,size:"sm",children:[e.jsx(K,{}),e.jsxs(G,{mx:4,children:[e.jsx(W,{children:"Delete Thread?"}),e.jsx(U,{}),e.jsx(J,{children:"Are you sure you want to delete this thread? This action cannot be undone."}),e.jsx(q,{children:e.jsxs(R,{gap:3,children:[e.jsx(h,{ref:d,onClick:t,children:"Cancel"}),e.jsx(h,{colorScheme:"red",onClick:l,children:"Delete"})]})})]})]})]})}const je="/assets/creative-B1QY-ZS1.svg";function fe({thread:s,isInProfile:n=!0,authorLabel:r}){const{createdAt:d,title:c,body:i,_id:o,board:t,author:a,replies:l}=s,{compactView:x}=C(),[T]=w();return e.jsx(A,{w:"full",as:"li",children:e.jsxs(N,{size:"sm",variant:"filled",children:[e.jsx(P,{children:e.jsxs(p,{w:"full",gap:4,children:[e.jsxs(B,{w:"calc(100% - 180px)",flex:1,children:[r&&e.jsx(e.Fragment,{children:e.jsx(f,{in:!x,animateOpacity:!0,children:a.deleted?e.jsx(m,{preText:"By",children:"deleted user"}):e.jsx(u,{preText:"By",linkText:`${a.username}`,link:`/users/${a.username}`,fontSize:"md",pb:"1px"})})}),n?e.jsx(e.Fragment,{children:t.deleted?e.jsx(m,{preText:"On",children:"deleted board"}):e.jsx(u,{preText:"On",linkText:`/${t.name}`,link:`/boards/${t.name}`,pb:"1px",fontSize:"md"})}):e.jsx(e.Fragment,{children:a.deleted?e.jsx(m,{preText:"By",children:"deleted user"}):e.jsx(u,{preText:"By",linkText:a.username,link:`/users/${a.username}`,pb:"1px",fontSize:"md"})})]}),e.jsxs(p,{gap:2,minW:"fit-content",alignItems:"start",children:[e.jsx(j,{display:{base:"none",sm:"flex"},children:`${l.length} repl${l.length===1?"y":"ies"}`}),e.jsx(j,{children:L(d)}),n&&T&&e.jsx(ee,{threadId:o,boardName:t.name})]})]})}),e.jsx(Y,{}),e.jsxs(X,{children:[e.jsx(H,{as:D,to:`/threads/${o}`,children:e.jsx(S,{as:"h1",size:{base:"sm",md:"md"},...x?O:{},children:c})}),i&&e.jsx(f,{in:!x,animateOpacity:!0,children:e.jsx(M,{mt:{base:1,md:2},whiteSpace:"pre-wrap",lineHeight:1.25,children:i})})]})]})})}export{pe as C,fe as T,je as c,C as u};
