import{u as l,c as g,r as p,j as r,g as n,B as f}from"./index-Dxo2bz0P.js";import{u as b}from"./index.esm-DLJeC7qE.js";import{u as h}from"./useSubmitHandlers-C8_vVDZp.js";async function y(e){return fetch("https://lorem-backend-6ggh.onrender.com/api/auth/login",{method:"POST",body:JSON.stringify(e.getValues()),credentials:"include",headers:{"Content-Type":"application/json"}})}function w(e){const s=async()=>y(e),a=l(),{toast:o,...t}=g(),i=p.useMemo(()=>({400:async u=>{const{feedback:m}=await u.json();m.forEach(({subject:c,message:d})=>e.setError(c,{message:d}))},404:()=>{e.setError("username",{message:"Username or password is incorrect"}),e.setError("password",{message:"Username or password is incorrect"})},401:()=>{o({status:"warning",title:"Verification Needed",description:"Please check your email to verify your account."})},429:()=>t.tooMany15(),500:()=>t.serverError(),200:()=>{o({status:"success",title:"Successfully logged in"}),a("/home")}}),[]);return h(s,i)}function j(){const e=b({shouldUnregister:!0}),s=w(e);return r.jsxs("form",{onSubmit:e.handleSubmit(s),"aria-label":"Login Form",children:[r.jsx(n,{label:"Username",formRef:e,registerKey:"username",inputTestId:"LoginForm-username",errorTestId:"LoginForm-username-error",placeholder:"Enter username",...e.register("username",{required:"Username is required"})}),r.jsx(n,{label:"Password",formRef:e,registerKey:"password",inputTestId:"LoginForm-password",errorTestId:"LoginForm-password-error",placeholder:"Enter password",password:{forgot:!0},...e.register("password",{required:"Password is required"})}),r.jsx(f,{type:"submit",w:"full","data-cy":"LoginForm-submit",isLoading:e.formState.isSubmitting,children:"Submit"})]})}export{j as L};
