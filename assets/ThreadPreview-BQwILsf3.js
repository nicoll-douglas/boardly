import{r as f,ac as b,j as e,I as g,R as k,s as v,B as h,U as w,F as p,X as B,L as D,x as S,T as M}from"./index-CfX38i0E.js";import{G as z,M as $}from"./index-BOgs50uT.js";import{D as m,C as u,T as j,t as L}from"./DeletedLabel-Jd_gx_v8.js";import{n as E}from"./Spinner-B5-Pg5YH.js";import{D as F}from"./chunk-7YYN6TNS-CskFNnm6.js";import{u as O,L as A,a as H}from"./useProtectedSubmission--UnRbhvM.js";import{u as I}from"./useSubmitHandlers-Cwbi2rXh.js";import{u as V}from"./chunk-7JBTTEVG-DxtWywDM.js";import{A as G,a as Q,M as q,H as R}from"./chunk-RAWN7VJ3-DVbMMFoJ.js";import{M as K,c as W,d as U}from"./chunk-4FCEGNGT-B-jdCA2V.js";import{M as J}from"./chunk-OFOVX77R-zSbCe2qK.js";import{C as N,a as P,b as X}from"./chunk-YQO7BFFX-Bu66JaRZ.js";import{C as y}from"./chunk-RKXMPHPI-BX2ZiOEW.js";import{D as Y}from"./chunk-W7WUSNWJ-RwjSrdRn.js";function C(){return f.useContext(b)}function Z(s){return z({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"21",y1:"10",x2:"3",y2:"10"},child:[]},{tag:"line",attr:{x1:"21",y1:"6",x2:"3",y2:"6"},child:[]},{tag:"line",attr:{x1:"21",y1:"14",x2:"3",y2:"14"},child:[]},{tag:"line",attr:{x1:"21",y1:"18",x2:"3",y2:"18"},child:[]}]})(s)}function pe(){const{compactView:s,setCompactView:i}=C();return e.jsx(g,{variant:"ghost",size:"sm",icon:s?e.jsx($,{size:20}):e.jsx(Z,{size:20}),onClick:()=>i(r=>!r),"aria-label":"Toggle compact view","aria-pressed":s})}async function _(s){return fetch(`https://demo.boardly.nicolldouglas.dev/api/threads/${s}`,{method:"DELETE",credentials:"include"})}function ee({threadId:s,boardName:i}){const r=k(),d=f.useRef(),c=v(),{isOpen:n,onOpen:o,onClose:t}=V(),a=O(()=>{r.invalidateQueries({queryKey:["GET /api/me/threads"]}),r.invalidateQueries({queryKey:["GET /api/me/replies"]}),r.invalidateQueries({queryKey:[`GET /api/boards/${i}`]}),t(),c({status:"success",title:"Successfully deleted thread"})}),l=I(async()=>_(s),a);return e.jsxs(e.Fragment,{children:[e.jsx(g,{icon:e.jsx(F,{}),colorScheme:"red",variant:"ghost",size:"xs",onClick:o,zIndex:80,"aria-label":"Delete thread"}),e.jsxs(G,{isOpen:n,onClose:t,size:"sm",children:[e.jsx(K,{}),e.jsxs(Q,{mx:4,children:[e.jsx(W,{children:"Delete Thread?"}),e.jsx(U,{}),e.jsx(J,{children:"Are you sure you want to delete this thread? This action cannot be undone."}),e.jsx(q,{children:e.jsxs(R,{gap:3,children:[e.jsx(h,{ref:d,onClick:t,children:"Cancel"}),e.jsx(h,{colorScheme:"red",onClick:l,children:"Delete"})]})})]})]})]})}const je="/assets/creative-B1QY-ZS1.svg";function ye({thread:s,isInProfile:i=!0,authorLabel:r}){const{createdAt:d,title:c,body:n,_id:o,board:t,author:a,replies:l}=s,{compactView:x}=C(),[T]=w();return e.jsx(A,{w:"full",as:"li",children:e.jsxs(N,{size:"sm",variant:"filled",children:[e.jsx(P,{children:e.jsxs(p,{w:"full",gap:4,children:[e.jsxs(B,{w:"calc(100% - 180px)",flex:1,children:[r&&e.jsx(e.Fragment,{children:e.jsx(y,{in:!x,animateOpacity:!0,children:a.deleted?e.jsx(m,{preText:"By",children:"deleted user"}):e.jsx(u,{preText:"By",linkText:`${a.username}`,link:`/users/${a.username}`,fontSize:"md",pb:"1px"})})}),i?e.jsx(e.Fragment,{children:t.deleted?e.jsx(m,{preText:"On",children:"deleted board"}):e.jsx(u,{preText:"On",linkText:`/${t.name}`,link:`/boards/${t.name}`,pb:"1px",fontSize:"md"})}):e.jsx(e.Fragment,{children:a.deleted?e.jsx(m,{preText:"By",children:"deleted user"}):e.jsx(u,{preText:"By",linkText:a.username,link:`/users/${a.username}`,pb:"1px",fontSize:"md"})})]}),e.jsxs(p,{gap:2,minW:"fit-content",alignItems:"start",children:[e.jsx(j,{display:{base:"none",sm:"flex"},children:`${l.length} repl${l.length===1?"y":"ies"}`}),e.jsx(j,{children:L(d)}),i&&T&&e.jsx(ee,{threadId:o,boardName:t.name})]})]})}),e.jsx(Y,{}),e.jsxs(X,{children:[e.jsx(H,{as:D,to:`/threads/${o}`,children:e.jsx(S,{as:"h1",size:{base:"sm",md:"md"},...x?E:{},children:c})}),n&&e.jsx(y,{in:!x,animateOpacity:!0,children:e.jsx(M,{mt:{base:1,md:2},whiteSpace:"pre-wrap",lineHeight:1.25,children:n})})]})]})})}export{pe as C,ye as T,je as c,C as u};
