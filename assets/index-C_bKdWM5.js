import{c as m,r as n,j as r,g as s,B as l}from"./index-4ulQWezs.js";import{F as u}from"./FormModal-CSWPt1cU.js";import{u as d}from"./index.esm-p7AaXQnn.js";import{u as c}from"./useSubmitHandlers-DjEugLkN.js";import"./chunk-4FCEGNGT-BmvcryFd.js";import"./chunk-7254PCTD-CCpdpq8O.js";import"./chunk-OFOVX77R-CxszOX9N.js";import"./chunk-W7WUSNWJ-BBRS0i-z.js";async function f(e){return fetch("https://lorem-backend-6ggh.onrender.com/api/auth/forgot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.getValues())})}function p(e){const{toast:t,...o}=m(),i=async()=>f(e),a=n.useMemo(()=>({404:()=>e.setError("email",{message:"Could not find a user with this email address"}),429:()=>o.tooMany15(),500:()=>o.serverError(),200:()=>{e.reset(),t({title:"Email Sent",status:"success",description:"Please check your email and click the link to reset your password. It may be in your spam folder."})}}),[]);return c(i,a)}function g(){const e=d(),t=p(e);return r.jsxs("form",{onSubmit:e.handleSubmit(t),"aria-label":"Forgort Password Form",children:[r.jsx(s,{formRef:e,registerKey:"email",placeholder:"Enter email",inputTestId:"ForgotPwdForm-email",errorTestId:"ForgotPwdForm-email-error",label:"Email",helperText:"We'll send you an email to help you reset your password.",helpersAsList:!1,...e.register("email",{required:"Email is required"})}),r.jsx(s,{formRef:e,registerKey:"confirmEmail",placeholder:"Re-enter email",inputTestId:"ForgotPwdForm-confirmEmail",errorTestId:"ForgotPwdForm-confirmEmail-error",label:"Confirm email",...e.register("confirmEmail",{required:"Please confirm your email",validate:o=>o===e.getValues("email")||"Emails do not match"})}),r.jsx(l,{"data-cy":"ForgotPwdForm-submit",type:"submit",w:"full",isLoading:e.formState.isSubmitting,children:"Submit"})]})}function j(){return r.jsx(u,{isOpen:!0,heading:"Forgot Password",motionPreset:"none",children:r.jsx(g,{})})}export{j as default};
